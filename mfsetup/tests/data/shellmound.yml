simulation:
  sim_name: 'shellmound'
  version: 'mf6'
  sim_ws: '../tmp/shellmound'

model:
  simulation: 'shellmound'
  modelname: 'shellmound'
  packages: ['dis',
             'tdis',
             'oc',
             'npf',
             'rch',
             'sfr',
             'wel',
             'maw',
             'ims'
  ]

external_path: 'external/'

intermediate_data:
  output_folder: 'tmp/'

setup_grid:
  grid_file: '{}_grid.yml' # inset grid info will be written to this file
  xoff: 501405 # lower left x-coordinate
  yoff: 1175835 # lower left y-coordinate
  rotation: 0.
  epsg: 5070
  snap_to_NHG: True

nam:
  list_filename_fmt: '{}.list'
  options:
    print_input: True
    print_flows: True
    save_flows: True
    newton: True

  packages: ['dis6',
             'ic6',
             'npf6',
             'oc6',
             'sto6',
             'sfr6',
             'wel6'
  ]

dis:
  remake_top: True
  options:
    length_units: 'meters'
  dimensions:
    nlay: 13
    nrow: 30
    ncol: 35
  griddata:
    delr: 1000.
    delc: 1000.
  source_data:
    top:
      filename: 'shellmound/rasters/meras_100m_dem.tif' # DEM file; path relative to setup script
      elevation_units: 'meters'
    botm:
      filenames:
        0: 'shellmound/rasters/vkbg_surf.tif' # Vicksburg-Jackson Group (top)
        1: 'shellmound/rasters/ucaq_surf.tif' # Upper Claiborne aquifer (top)
        2: 'shellmound/rasters/mccu_surf.tif' # Middle Claiborne confining unit (top)
        3: 'shellmound/rasters/mcaq_surf.tif' # Middle Claiborne aquifer (top)
        6: 'shellmound/rasters/lccu_surf.tif' # Lower Claiborne confining unit (top)
        8: 'shellmound/rasters/lcaq_surf.tif' # Lower Claiborne aquifer (top)
        9: 'shellmound/rasters/mwaq_surf.tif' # Middle Wilcox aquifer (top)
        10: 'shellmound/rasters/lwaq_surf.tif' # Lower Wilcox aquifer (top)
        12: 'shellmound/rasters/mdwy_surf.tif' # Midway confining unit (top)
      elevation_units: 'feet'
  top_filename_fmt: "top.dat"
  botm_filename_fmt: "botm{:d}.dat"
  idomain_filename_fmt: "idomain{:d}.dat"
  minimum_layer_thickness: 1 # m
  drop_thin_cells: True

tdis:
  options:
    time_units: 'days'
    start_date_time: '2008-10-01'
    end_date_time: '2016-10-01' # specify end date, and nper or freq to have perlen automatically set
  dimensions:
    nper: 16 # Only used if perlen is None, or in combination with freq if an end_date isn't specified.
  perioddata:
    perlen: # Specify perlen as a list of lengths in model units, or perlen=None and 3 of start_date, end_date, nper and/or freq."
    freq: '6MS' # same as argument to pandas.date_range; (see "Offset Aliases" at https://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html#timeseries-offset-aliases)
    nstp: 15
    tsmult: 1.5

ic:
  strt_filename_fmt: "strt{:d}.dat"

npf:
  options:
    save_flows: True
  griddata:
    icelltype: 1 # variable sat. thickness in all layers
  source_data:
    k:
      filenames:
        0: 'shellmound/rasters/k0.tif' # Vicksburg-Jackson Group
        1: 'shellmound/rasters/k1.tif' # Upper Claiborne aquifer
        2: 'shellmound/rasters/k2.tif' # Middle Claiborne confining unit
        3: 'shellmound/rasters/k3.tif' # Middle Claiborne aquifer
        4: 'shellmound/rasters/k3.tif' # Middle Claiborne aquifer
        5: 'shellmound/rasters/k3.tif' # Middle Claiborne aquifer
        6: 'shellmound/rasters/k4.tif' # Lower Claiborne confining unit
        7: 'shellmound/rasters/k4.tif' # Lower Claiborne confining unit
        8: 'shellmound/rasters/k5.tif' # Lower Claiborne aquifer
        9: 'shellmound/rasters/k6.tif' # Middle Wilcox aquifer
        10: 'shellmound/rasters/k10.tif' # Lower Wilcox aquifer
        11: 'shellmound/rasters/k10.tif' # Lower Wilcox aquifer
        12: 'shellmound/rasters/k12.tif' # Lower Wilcox aquifer
      length_units: 'feet'
    k33:
      filenames:
        0: 'shellmound/rasters/k330.tif' # Vicksburg-Jackson Group
        1: 'shellmound/rasters/k331.tif' # Upper Claiborne aquifer
        2: 'shellmound/rasters/k332.tif' # Middle Claiborne confining unit
        3: 'shellmound/rasters/k333.tif' # Middle Claiborne aquifer
        4: 'shellmound/rasters/k333.tif' # Middle Claiborne aquifer
        5: 'shellmound/rasters/k333.tif' # Middle Claiborne aquifer
        6: 'shellmound/rasters/k334.tif' # Lower Claiborne confining unit
        7: 'shellmound/rasters/k334.tif' # Lower Claiborne confining unit
        8: 'shellmound/rasters/k335.tif' # Lower Claiborne aquifer
        9: 'shellmound/rasters/k336.tif' # Middle Wilcox aquifer
        10: 'shellmound/rasters/k3310.tif' # Lower Wilcox aquifer
        11: 'shellmound/rasters/k3310.tif' # Lower Wilcox aquifer
        12: 'shellmound/rasters/k3312.tif' # Lower Wilcox aquifer
      length_units: 'feet'
  k_filename_fmt: "k{:d}.dat"
  k33_filename_fmt: "h33{:d}.dat"

sto:
  options:
    save_flows: True
  griddata:
    iconvert: 1  # convertible layers
    sy: 0.25
    ss: 1.e-6
  sy_filename_fmt: "sy{:d}.dat"
  ss_filename_fmt: "ss{:d}.dat"
  steady: {0: True, 1: False}

rch:
  options:
    print_input: True
    print_flows: False
    save_flows: True
    readasarrays: True
  source_data:
    recharge:
      filename: 'shellmound/net_infiltration__2000-01-01_to_2017-12-31__414_by_394.nc'
      variable: 'net_infiltration'
      length_units: 'inches'
      time_units: 'days'
      period_stats:
        0: ['mean', '2012-01-01', '2017-12-31']
        1: 'mean'
  recharge_filename_fmt: "rch{:d}.dat"

sfr:
  options:
    save_flows: True
  budget_fileout: 'sfr_out.bin'
  stage_fileout: 'sfr_stage.bin'
  obs6_filein_fmt: '{}.sfr.obs6'
  output_path: 'sfr'

wel:
  options:
    print_input: True
    print_flows: True
    save_flows: True
  source_data:
    flux:
      filename: 'shellmound/irr_wu_1mi_gs1999_to_gs2017.nc'
      variable:
      length_unit_conversion: 0.38610215854244584  # m3/mi2 to m2/km3
      time_units: ''
      period_stats:
        0:
        1: 'mean'
  output_files:
    lookup_file: 'wel_lookup.csv' # output file that maps wel package data to site numbers

oc:
  head_fileout_fmt: '{}.hds'
  budget_fileout_fmt: '{}.cbc'
  saverecord: {0: {head: 'last',
                   budget: 'last'}
  }

obs:
  default_columns:
    x_location_col: 'x_5070' # x coordinates in wtm
    y_location_col: 'y_5070' # y coordinates in wtm

ims:
  options:
    print_option: 'all'
    complexity: 'moderate'
    'csv_output fileout': 'solver_out.csv'
  nonlinear:
    outer_hclose: 1.e-3
    outer_maximum: 1000
    under_relaxation:  'dbd'
    under_relaxation_theta: 0.9
    under_relaxation_kappa: 0.1
    under_relaxation_gamma: 0.2
    under_relaxation_momentum: 0.001
  linear:
    inner_maximum: 100
    inner_hclose: 1.e-3
    inner_rclose: 0.1
    
